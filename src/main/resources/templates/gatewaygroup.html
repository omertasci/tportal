<!DOCTYPE html>
<!-- saved from url=(0046)http://bootstrap.gallery/everest-v3/index.html -->
<html lang="en"
xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org">
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>		
		<meta name="viewport" content="width=device-width, initial-scale=1.0"></meta> 
		<meta name="description" content="Everest Admin Panel"></meta>
		<meta name="keywords" content="Admin, Dashboard, Bootstrap3, Sass, transform, CSS3, HTML5, Web design, UI Design, Responsive Dashboard, Responsive Admin, Admin Theme, Best Admin UI, Bootstrap Theme, Wrapbootstrap, Bootstrap"></meta>
		<meta name="author" content="Bootstrap Gallery"></meta>
		<link rel="shortcut icon" th:href="@{./resources/static/img/tor-icon.png}" ></link>
		<title>Triote IoT Panel</title>
		
		<script th:src="@{./resources/static/js/jquery-1.10.2.min.js}"></script>
		<script th:src="@{./resources/static/js/bootstrap.min.js}"></script>

		<!-- Bootstrap CSS -->
		<link href="./css/bootstrap.min.css" th:href="@{./resources/static/css/bootstrap.min.css}"  type="text/css" rel="stylesheet" media="screen"></link>

		<!-- Animate CSS -->
		<link href="./css/animate.css" th:href="@{./resources/static/css/animate.css}" type="text/css" rel="stylesheet" media="screen"></link>

		<!-- Alertify CSS -->
	    <link th:href="@{./resources/static/css/alertify.core.css}" rel="stylesheet"></link>
	    <link th:href="@{./resources/static/css/alertify.default.css}" rel="stylesheet"></link>
	    
		<!-- Main CSS -->
		<link href="./css/main.css" th:href="@{./resources/static/css/main.css}" type="text/css" rel="stylesheet" media="screen"></link>

		<!-- Datepicker CSS -->
		<link rel="stylesheet" type="text/css" href="./css/datepicker.css" th:href="@{./resources/static/css/datepicker.css}"></link>

		<!-- Bar Indicator -->
		<link href="./css/barIndicator.css" th:href="@{./resources/static/css/barIndicator.css}" type="text/css" rel="stylesheet"></link>

		<!-- Font Awesome -->
		<link href="./css/font-awesome.min.css" th:href="@{./resources/static/css/font-awesome.min.css}" type="text/css" rel="stylesheet"></link>
		
		<!-- Datatable CSS -->
<!-- 		<link th:href="@{./resources/static/css/jquery.dataTables.min.css}" type="text/css" rel="stylesheet"></link> -->		
		<link th:href="@{./resources/static/css/dataTables.bs.min.css}" type="text/css" rel="stylesheet"></link>
		<link th:href="@{./resources/static/css/autoFill.bs.min.css}" type="text/css" rel="stylesheet"></link>
		<link th:href="@{./resources/static/css/fixedHeader.bs.css}" type="text/css" rel="stylesheet"></link>
		<link th:href="@{./resources/static/css/buttons.bs.css}" type="text/css" rel="stylesheet"></link>
			
		<link th:href="@{./resources/static/css/listMenu.css}" type="text/css"	rel="stylesheet" media="screen"></link>        
	
		<link href="./css/c3/c3.css" th:href="@{./resources/static/css/c3/c3.css}" type="text/css" rel="stylesheet"></link>
		
		<!-- 		Highcharts  -->
		<script th:src="@{./resources/static/js/highcharts/highcharts.js}" ></script>
		<script th:src="@{./resources/static/js/highcharts/exporting.js}"></script>
		
		<script th:src="@{./resources/static/js/portaljs/gatewaygroup.js}"></script>		
		<script th:src="@{./resources/static/js/portaljs/leftMenu.js}"></script>

		
		
		<!-- 		Bootstrap Toggle  -->

		<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"></link>
		<script th:src="@{./resources/static/js/bootstrap-toggle.min.js}"></script>

	</head>
	<body>
		<script th:inline="javascript">
		// <![CDATA[
// 		         var info = [[${messageInfo}]];
		         $(window).on("load", function() {
		        	 
		        	 prepareHtmlObjects();
		        	 
			      if (parsed_qs != "undefined" & parsed_qs.hasOwnProperty("alert") & parsed_qs.alert != "undefined") {
				  		var alertCode = parsed_qs.alert;
				  		alertify.log(alertCode + ": The requested gateway is inactive!");
				  	}
		 });
		//  ]]>
	</script>		
		<!-- Left sidebar starts -->
		<div th:include="leftMenu :: menuTemplate"></div>
		<!-- Left sidebar ends -->

		<!-- Dashboard Wrapper starts -->
		<div class="dashboard-wrapper">
			<div class="formden_header" th:unless="${#lists.isEmpty(allReferers)}">
							<table>
								<thead>
								<tr>
									<th th:each="ref,rowStat : ${allReferers}" >
										<label th:if="${rowStat.count} &gt; 1" th:text="#{>}" > </label>
										<a class="btn btn-link" th:href="@{${{ref.url}}}" th:text="#{${'label.referer.' + ref.label}}"></a>
									</th>
								</tr>
								</thead>
							</table>
			</div>
			<!-- Top Bar starts -->
			<div class="top-bar">
				<div class="page-title">
					Gateway Group Content
				</div>
				<ul class="stats hidden-xs">
					
				</ul>
			</div>
			<!-- Top Bar ends -->

			<!-- Main Container starts -->
			<div class="main-container">

				<!-- Container fluid Starts -->
				<div class="container-fluid">

					<!-- Current Stats Start -->
					
					<!-- Current Stats End -->
					
					

					<!-- Spacer starts -->
					<div class="spacer-no-top">
					
						<!-- Row starts -->
						<div class="row gutter">
							<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
								<div class="panel panel-light">
									<div class="panel-heading">
										<h4 class="panel-title">Gateways Consumptions in GWG(Watt)</h4>
									</div>
									<div style="width: 80%; margin: 0 auto; margin-bottom: 0.5em">
										<div >	
												<label class="radio-inline">
												  <input type="radio" name="optradio" id="inlineRadio1" value="1">Last 1 Day</input>
												</label>
												<label class="radio-inline">
												  <input type="radio" name="optradio" id="inlineRadio2" value="7">Last 7 Days</input>
												</label>
												<label class="radio-inline ">
												  <input type="radio" name="optradio" id="inlineRadio3" value="30" checked="true" >Last 30 Days</input>
												</label>
												
												
										<script> $("input[name=optradio]").change(function () {
											loadReportDataByDuration(3,this.value);
										
										});</script>
										</div>
									</div>
									<div class="panel-body">
										<div id="lineGraph" class="chart-height2 col-lg-12 col-md-12 col-sm-6 col-xs-6"></div>										
									</div>
									
								</div>
							</div>
							<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
								<div class="panel panel-light">
									<div class="panel-heading">
										<h4 class="panel-title">Dim Levels (Lamps)</h4>
									</div>
									<div class="panel-body">
										<div id="stackedBarGraph" class="chart-height3 col-lg-12 col-md-12 col-sm-6 col-xs-6"></div>
									</div>
								</div>
							</div>
						</div>
						<!-- Row ends -->
						<!-- Row Start -->
						<div class="row gutter">
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
								<div class="panel panel-light">
									<div class="panel-heading">
										<h4>Gateways in GWG</h4>
									</div>
									
									<div class="panel-body">
										<div class="table-responsive">
										<script>
											$(document).ready(function() {
											    $('#basicExample').DataTable();
											} );
										</script>
										<table id="basicExample" class="table table-striped table-condensed table-bordered no-margin">
											 <thead>
						                        <tr>
						                          <th>Resource Name</th>
						                          <th>Resource Id</th>
						                          <th>POA</th>
						                          <th>Type</th>
						                          <th>Version</th>
						                          <th>Request Reachibility </th>
						                          <th>State</th>
						                        </tr>
						                      </thead>
						                      <tfoot>
													<tr>
													  <th>Resource Name</th>
							                          <th>Resource Id</th>
							                          <th>POA</th>
							                          <th>Type</th>
							                          <th>Version</th>
							                          <th>Request Reachibility </th>
							                          <th>State</th>
													</tr>
												</tfoot>
											<tbody th:each="gateway : ${gwGroupList}" >
											    <tr>
											        <td><a th:href="@{gateway.html(cseName=${gateway.rn},cseId=${gateway.csi},ri=${gateway.ri},huri=${gateway.huri})}" class="list-group-item" th:text="${gateway.rn}"></a></td>
											        <td th:text="${gateway.ri}"></td>
											        <td th:text="${gateway.poa}"></td>
											        <td th:text="${gateway.ty}"></td>
											        <td th:text="${gateway.ver}"></td>
											        <td th:text="${gateway.rr}" style="background-color: darkseagreen; text-align: center; text-transform: uppercase" th:if="${gateway.rr=='true'}"></td>											        
											        <td th:text="${gateway.rr}" style="background-color: burlywood; text-align: center; text-transform: uppercase" th:if="${gateway.rr=='false'}"></td>
											        <td th:text="${gateway.cseState}" ></td>
											        
											    </tr>
											</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						
						
						
						<div class="row gutter">
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
								<div class="panel panel-light">
									<div class="panel-heading">
										<h4>GWG Operations</h4>
									</div>
									
									<div class="panel-body">
										<div class="table-responsive">
										<div class="tab-pane fade in active" id="errorDisplay" th:if="${#lists.isEmpty(modulClassLs)}">
										<h5>Operations cannot be retrieved because gateways are not reachable!</h5>
										</div>
										<div class="tab-pane fade in active" id="modulClassLs" th:if="${not #lists.isEmpty(modulClassLs)}">
									<script>
									$(document).ready(function() {
									    $('#modulClassLsTbl').DataTable();
									} );
									</script>
									<table id="modulClassLsTbl"
										class="table table-striped table-condensed table-bordered no-margin">
										<thead>
											<tr>
												<th>Container Definition</th>												
												<th>Custom Attribute</th>
												<th>Operation</th>
											</tr>
										</thead>
										<tfoot>
											<tr>
												<th>Container Definition</th>												
												<th>Custom Attribute</th>
												<th>Operation</th>
											</tr>
										</tfoot>
										<tbody
											th:each="moduleClass : ${modulClassLs}">
											<tr>											
												<td th:text="${moduleClass.containerDefinition}"></td>
												<td th:id="${moduleClass.moduleType}+'Row'">
													<div th:each="ca : ${moduleClass.caList}">
														<label th:for="${ca.name}" th:text="${ca.name}"></label><br/>
														<label th:id="${ca.name}" th:if="${ca.writable==false}" th:text="${ca.lastValue}" class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="background-color: #f1ec8f; text-align: center; text-transform: uppercase"></label><br/>
														<input class="caAttributeCls" th:if="${ca.returnType=='java.lang.Integer' and ca.writable == true}" th:id="${ca.name}" th:name="${ca.name}" type="number" th:value="${ca.lastValue}" th:attr="data-maxvalue=''+${ca.maxValue}+'', data-minvalue=''+${ca.minValue}+''"
														 style="background-color: #ece0e0;max-width: 60px;" />
															<script>
															// <![CDATA[
															$(function() {
																  $('.caAttributeCls').on('keyup', function() {
																    var val = parseInt($(this).val()),
																	maxLimit = $(this).data('maxvalue'),
																   minLimit = $(this).data('minvalue');
																	var returnVal = val;
																    
																    if(isNaN(val)){
																    	returnVal = 0;
																    }
																    if((!isNaN(val)) && (maxLimit != null)&& (maxLimit < val)){
																    	returnVal = maxLimit;
																    }
																    if((!isNaN(val)) && (minLimit != null)&&(minLimit > val)){
																    	returnVal = minLimit;
																    }
// 																    val = isNaN(val) ? 0 : Math.max(Math.min(val, maxLimit), minLimit);
																    
																    $(this).val(returnVal);
																  });
																});
															// ]]>
															</script>
															
															<input data-onstyle="success" data-offstyle="danger" th:if="${ca.returnType=='java.lang.Boolean' and ca.writable == true}"  th:id="${ca.name}" th:name="${ca.name}" type="checkbox" th:attr="data-lastValue=''+${ca.lastValue}+''" data-toggle="toggle" data-on="TRUE" data-off="FALSE"/>

													</div>
												</td>
												<td>
													<button id="updateModalBtn" class="btn btn-info" data-original-title="" title=""	style="margin-top: 1em;"														
															sec:authorize="hasAuthority('EDIT_COMPANY') or  #strings.contains(#authentication.principal.roles,'SUPERADMIN')"
															th:onclick="|doExecute( '${moduleClass.huri}','${moduleClass.moduleType}' ,'${moduleClass.resourceId}','${moduleClass.resourceName}', '${moduleClass.containerDefinition}')|">Execute</button>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						
						
						
		
						
					</div>
					<!-- Spacer ends -->

				</div>
				<!-- Container fluid ends -->
			</div>
			<!-- Main Container ends -->

			<!-- Footer starts -->
			<footer>
				Copyright Triote IoT Panel 2017.
			</footer>
			<!-- Footer ends -->

		</div>
		
<!-- Dashboard Wrapper ends -->

	<!-- Notifications JS -->
	<script th:src="@{./resources/static/js/alertify.js}"></script>
	<script th:src="@{./resources/static/js/alertify-custom.js}"></script>
	
	<!-- Data Tables (required for moduleclass max value control)-->
	<script th:src="@{./resources/static/js/datatables/dataTables.min.js}"	src="js/datatables/dataTables.min.js"></script>
		
	<!-- D3 JS -->
		<script th:src="@{./resources/static/js/d3/d3.min.js}"></script>
		<!-- C3 JS (D3 JS must be included before)-->
		<script th:src="@{./resources/static/js/c3/c3.min.js}"></script>
		<script th:src="@{./resources/static/js/c3/c3.custom.js}"></script>
	
<a id="scrollUp" href="gatewaygroup.html#top" style="position: fixed; z-index: 2147483647; display: none;">
	<i class="fa fa-chevron-up"></i>
</a>
<div class="jvectormap-label"></div>
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>
</body></html>